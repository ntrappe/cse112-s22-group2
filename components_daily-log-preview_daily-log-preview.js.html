<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/daily-log-preview/daily-log-preview.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/daily-log-preview/daily-log-preview.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Class name constants
export const DAILY_LOG_PREVIEW_WRAPPER_CLASS = 'daily-log-preview-wrapper';
export const TEXT_WRAPPER_CLASS = 'text-container';
export const ICONS_WRAPPER_CLASS = 'icon-container';
export const LOG_ICON_CLASS = 'log-icon';
export const PREVIEW_TITLE_CLASS = 'preview-title';
export const PREVIEW_PARAGRAPH_CLASS = 'preview-paragraph';
export const DAILY_LOG_TITLE = 'Daily Log ';

// Preview constants
export const NO_PREVIEW_TEXT = 'No preview text available.';
const MAX_PREVIEW_LENGTH = 30;

// Icon constants
const TRACKER_ICON = './icons/tracker';
const NOTES_ICON = './icons/notes';
const JOURNAL_ICON = './icons/journal';
const ON = '-icon-on.png';
const OFF = '-icon-off.png';
const NO_TRACKER_FILLED_OUT = 'no trackers filled out';
const NO_NOTES_FILLED_OUT = 'no notes filled out';
const NO_JOURNAL_FILLED_OUT = 'no journal filled out';

/**
 * @module DailyLogPreview
 * Class that renders a brief preview of a daily log
 * @extends HTMLElement
 *
 * @example
 * &lt;daily-log-preview>&lt;/daily-log-preview>
 */
class DailyLogPreview extends HTMLElement {
    /* Creates an HTML skeleton and defines the hierachy */
    constructor() {
        super();

        /* Creates shadow DOM */
        const shadow = this.attachShadow({ mode: 'open' });

        /* Creates all elements of the skeleton */
        const wrapper = document.createElement('section'); // outer container div
        const leftSideDiv = document.createElement('div'); // contains title and preview text
        const rightSideDiv = document.createElement('div'); // contains the trackers
        const title = document.createElement('h2');
        const preview = document.createElement('p');
        const trackerIcon = document.createElement('img');
        const notesIcon = document.createElement('img');
        const journalIcon = document.createElement('img');

        /* Defines the heirachy */
        leftSideDiv.appendChild(title);
        leftSideDiv.appendChild(preview);
        rightSideDiv.appendChild(trackerIcon);
        rightSideDiv.appendChild(notesIcon);
        rightSideDiv.appendChild(journalIcon);
        wrapper.appendChild(leftSideDiv);
        wrapper.appendChild(rightSideDiv);
        shadow.appendChild(wrapper);

        /* Apply external styles to the shadow dom */
        const dailyLogPreviewCSS = document.createElement('link');
        dailyLogPreviewCSS.setAttribute('rel', 'stylesheet');
        dailyLogPreviewCSS.setAttribute(
            'href',
            './styles/daily-log-preview.css',
        );
        shadow.appendChild(dailyLogPreviewCSS);

        /* Adds classes to the created elements */
        title.setAttribute('class', PREVIEW_TITLE_CLASS);
        preview.setAttribute('class', PREVIEW_PARAGRAPH_CLASS);
        wrapper.setAttribute('class', DAILY_LOG_PREVIEW_WRAPPER_CLASS);
        leftSideDiv.setAttribute('class', TEXT_WRAPPER_CLASS);
        rightSideDiv.setAttribute('class', ICONS_WRAPPER_CLASS);

        /* By default set each icon to its png in off mode */
        trackerIcon.setAttribute('src', `${TRACKER_ICON}${OFF}`);
        trackerIcon.setAttribute('alt', NO_TRACKER_FILLED_OUT);
        notesIcon.setAttribute('src', `${NOTES_ICON}${OFF}`);
        notesIcon.setAttribute('alt', NO_NOTES_FILLED_OUT);
        journalIcon.setAttribute('src', `${JOURNAL_ICON}${OFF}`);
        journalIcon.setAttribute('alt', NO_JOURNAL_FILLED_OUT);
        const icons = rightSideDiv.children;
        for (let iconInd = 0; iconInd &lt; icons.length; iconInd++) {
            const icon = icons[iconInd];
            icon.setAttribute('class', LOG_ICON_CLASS);
        }

        /**
         * @method populateFields
         * Fills in a preview component with given data.
         * Helper function for control.
         * @param {String} dateOfEntry in form "mm/dd/yyyy"
         * @param {String} textEntry
         * @param {Boolean} didTrackers
         * @param {Boolean} didNotes
         * @param {Boolean} didJournal
         */
        this.populateFields = (
            dateOfEntry,
            textEntry,
            didTrackers,
            didNotes,
            didJournal,
        ) => {
            title.textContent = DAILY_LOG_TITLE + dateOfEntry;
            preview.textContent = this.getPreviewText(textEntry);

            /* depending on if item done, show icon as on or off by updating src */
            if (didTrackers) {
                trackerIcon.setAttribute('src', `${TRACKER_ICON}${ON}`);
            } else {
                trackerIcon.setAttribute('src', `${TRACKER_ICON}${OFF}`);
            }
            if (didNotes) {
                notesIcon.setAttribute('src', `${NOTES_ICON}${ON}`);
            } else {
                notesIcon.setAttribute('src', `${NOTES_ICON}${OFF}`);
            }
            if (didJournal) {
                journalIcon.setAttribute('src', `${JOURNAL_ICON}${ON}`);
            } else {
                journalIcon.setAttribute('src', `${JOURNAL_ICON}${OFF}`);
            }
        };

        /**
         * @method getPreviewText
         * Returns string of text displayed on preview.
         * Will cut off beyond certain number of chars.
         * @param {string} textEntry
         * @returns string
         */
        this.getPreviewText = (textEntry) => {
            if (!textEntry) {
                return NO_PREVIEW_TEXT;
            }
            return textEntry.length > MAX_PREVIEW_LENGTH
                ? textEntry.substring(0, MAX_PREVIEW_LENGTH)
                : textEntry;
        };

        /**
         * Returns the date of preview {mm/dd/yyyy}
         * @returns string {mm/dd/yyyy}
         */
        this.getDate = () => {
            const titleText = (title.textContent).split(' ');
            return titleText[2];
        };

        const openLogEvent = new CustomEvent('openLog', {
            bubbles: true, // event listenable outside of container
            composed: true,
            detail: { date: () => this.getDate() },
        });

        this.onclick = () => {
            shadow.dispatchEvent(openLogEvent);
        };
    }
}

customElements.define('daily-log-preview', DailyLogPreview);

export default DailyLogPreview;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="DailyLogPreview%250AClass%2520that%2520renders%2520a%2520brief%2520preview%2520of%2520a%2520daily%2520logmodule_.html">DailyLogPreview
Class that renders a brief preview of a daily log</a></li><li><a href="DailyLogPreview%250AClass%2520that%2520renders%2520a%2520full%2520daily%2520logmodule_.html">DailyLogPreview
Class that renders a full daily log</a></li><li><a href="module-add-component.html">add-component</a></li><li><a href="module-inboxHelper.html">inboxHelper</a></li><li><a href="module-Storage.html">Storage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#changeBulletChangesthebullettypetoselectedbulletandautoclosesmodal">changeBullet
Changes the bullet type to selected bullet and auto closes modal</a></li><li><a href="global.html#convertStorageDate">convertStorageDate</a></li><li><a href="global.html#createListElementCreatesanewnoteentryelementandappendsittotheNotessection">createListElement
Creates a new note entry element and appends it to the Notes section</a></li><li><a href="global.html#currentEntries">currentEntries</a></li><li><a href="global.html#deleteEntryDeletesabulletiftheuserpressesbackspaceonanemptybulletanddeletesentryfromcurrentEntries.Helperfunctionforcontrol.">deleteEntry
Deletes a bullet if the user presses backspace on an empty bullet
and deletes entry from currentEntries.
Helper function for control.</a></li><li><a href="global.html#deleteEntryUpdatesvalueofentryincurrentEntries.">deleteEntry
Updates value of entry in currentEntries.</a></li><li><a href="global.html#enterKeyPressedCreatesanewbulletonthenextlineiftheuserpressesenterandaddscurrententrytocurrentEntries,orifanexistingbulletiseditedthenitupdatestheentryincurrentEntriesHelperfunctionforcontrol.">enterKeyPressed
Creates a new bullet on the next line if the user presses enter and adds
current entry to currentEntries, or if an existing bullet is edited then
it updates the entry in currentEntries
Helper function for control.</a></li><li><a href="global.html#launchBulletModalUpdatesmostrecentbulletwiththebulletthattriggeredthiseventhandlerandlaunchesbulletmodalwithadisplayofthisselectedlistelement">launchBulletModal
Updates most recent bullet with the bullet that triggered this event handler
and launches bullet modal with a display of this selected list element</a></li><li><a href="global.html#notesClickHidesthenotesplaceholderandcreatesanewbullet.">notesClick
Hides the notes placeholder and creates a new bullet.</a></li><li><a href="global.html#populateListElementYesthisisaveryredundantfunction.(TODO:relyonabovefxn).Willrepopulatethelistofbulletpointsfromlocalstoragebycreatingabulletpoint,addingcontent,andsettingbulletstyle.">populateListElement
Yes this is a very redundant function. (TODO: rely on above fxn).
Will repopulate the list of bullet points from local storage
by creating a bullet point, adding content, and setting bullet style.</a></li><li><a href="global.html#setDefaultDateHelperfunctiontofetchcurrentdateandformattobe%2522%257Bdayofweek%257D,%257Bmonth%257D%257Bdate%257D,%257Byear%257D%2522">setDefaultDate
Helper function to fetch current date and format
to be "{day of week}, {month} {date}, {year}"</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Jun 09 2022 22:11:35 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
