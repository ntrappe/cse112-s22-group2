<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/tracker-modal/tracker-modal.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/tracker-modal/tracker-modal.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>class TrackerModal extends HTMLElement {
    constructor() {
        super();

        // determines if the user is on mobile by checking its user Agent
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i
            .test(navigator.userAgent);

        // write element functionality in here
        const shadow = this.attachShadow({ mode: 'open' });

        // set the style for the shadow DOM elements
        const modalStyle = document.createElement('link');
        const emojiPickerStyle = document.createElement('link');
        modalStyle.setAttribute('rel', 'stylesheet');
        modalStyle.setAttribute('href', './styles/tracker-modal.css');
        emojiPickerStyle.setAttribute('rel', 'stylesheet');
        emojiPickerStyle.setAttribute('href', './styles/emoji-picker.css');

        // create the elements which compose the custom element
        const modalContainer = document.createElement('section');
        const controlContainer = document.createElement('div');
        const questionHeader = document.createElement('h1');
        const imageContainer = document.createElement('div');

        const cancelBtn = document.createElement('button');
        const saveBtn = document.createElement('button');
        const emoji = document.createElement('emoji');
        const emojiPicker = document.createElement('emoji-picker');
        const instructionsText = document.createElement('p');

        // set the attributes of the created elements
        modalContainer.setAttribute('id', 'modal-container');
        controlContainer.setAttribute('id', 'tracker-control-container');
        questionHeader.setAttribute('id', 'question-header');
        imageContainer.setAttribute('id', 'image-container');
        instructionsText.setAttribute('id', 'instruction-text');
        cancelBtn.setAttribute('id', 'tracker-cancel-btn');
        saveBtn.setAttribute('id', 'tracker-save-btn');

        // set the inner text/html of the created elements
        cancelBtn.textContent = 'Cancel';
        saveBtn.textContent = 'Save';
        questionHeader.innerText = 'How are you feeling?';
        emoji.innerHTML = '&amp;#129409';

        if (isMobile) {
            instructionsText.innerText = 'Tap to change the emoji';
        } else {
            instructionsText.innerText = 'Click to change the emoji';
        }

        // append to the shadowroot
        shadow.appendChild(modalStyle);
        shadow.appendChild(modalContainer);
        modalContainer.appendChild(controlContainer);
        modalContainer.appendChild(questionHeader);
        modalContainer.appendChild(imageContainer);
        modalContainer.appendChild(instructionsText);

        // append elements to container
        controlContainer.appendChild(cancelBtn);
        controlContainer.appendChild(saveBtn);
        imageContainer.appendChild(emoji);
        imageContainer.appendChild(emojiPicker);
        emojiPicker.appendChild(emojiPickerStyle);

        saveBtn.addEventListener('click', () => {
            console.log('current emoji: ' + emoji.textContent);
            shadow.dispatchEvent(saveTrackersEvent);
        });

        cancelBtn.addEventListener('click', () => {
            shadow.dispatchEvent(cancelTrackersEvent);
        });

        emojiPicker.addEventListener('emoji-click', (event) => {
            console.log(event.detail);
            emoji.innerHTML = event.detail.unicode;
            showEmoji();
        });
        imageContainer.addEventListener('click', showEmojiPicker);
        // emo

        function showEmojiPicker() {
            emojiPicker.style.display = 'flex';
            emoji.style.display = 'none';
            instructionsText.style.visibility = 'hidden';
            emojiPicker.shadowRoot.children[1].children[1].children[0].children[0].value = '';
            emojiPicker.shadowRoot.children[1].children[1].children[0].children[0]
                .dispatchEvent(new Event('input'));
        }

        function showEmoji() {
            emojiPicker.style.display = 'none';
            emoji.style.display = 'flex';
            imageContainer.style.display = 'flex';
            instructionsText.style.visibility = 'unset';
        }

        function nextTracker(trackerName) {
            if (emojiPicker.style.display !== 'none') {
                return;
            }

            if (trackerName === 'sleep') {
                const input = document.createElement('input');
                input.setAttribute('min', '0');
                input.setAttribute('min', '0');
                // imageContainer.
            }
            imageContainer.removeChild(emoji);
            modalContainer.removeChild(emojiPicker);
            imageContainer.removeEventListener('click', showEmojiPicker);
        }

        /* setter functions for control */

        /**
         * Takes a string emoji, converts to decimal code,
         * then sets emoji on page to match
         * @param {String} savedEmoji like '🦁'
         */
        this.setTrackerEmoji = (savedEmoji) => {
            const emojiDecimal = savedEmoji.codePointAt(0);
            const emojiDecimalCode = '&amp;#' + emojiDecimal;
            emoji.innerHTML = emojiDecimalCode;
        };

        /* Events */
        const saveTrackersEvent = new CustomEvent('saveTrackers', {
            bubbles: true, // event listenable outside of container
            composed: true,
            detail: { emoji: () => emoji.innerHTML },
        });

        const cancelTrackersEvent = new CustomEvent('cancelTrackers', {
            bubbles: true, // event listenable outside of container
            composed: true,
        });
    }
}

customElements.define('tracker-modal', TrackerModal);
export default TrackerModal;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="DailyLogPreview%250AClass%2520that%2520renders%2520a%2520brief%2520preview%2520of%2520a%2520daily%2520logmodule_.html">DailyLogPreview
Class that renders a brief preview of a daily log</a></li><li><a href="DailyLogPreview%250AClass%2520that%2520renders%2520a%2520full%2520daily%2520logmodule_.html">DailyLogPreview
Class that renders a full daily log</a></li><li><a href="module-add-component.html">add-component</a></li><li><a href="module-inboxHelper.html">inboxHelper</a></li><li><a href="module-Storage.html">Storage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#changeBulletChangesthebullettypetoselectedbulletandautoclosesmodal">changeBullet
Changes the bullet type to selected bullet and auto closes modal</a></li><li><a href="global.html#convertStorageDate">convertStorageDate</a></li><li><a href="global.html#createListElementCreatesanewnoteentryelementandappendsittotheNotessection">createListElement
Creates a new note entry element and appends it to the Notes section</a></li><li><a href="global.html#currentEntries">currentEntries</a></li><li><a href="global.html#deleteEntryDeletesabulletiftheuserpressesbackspaceonanemptybulletanddeletesentryfromcurrentEntries.Helperfunctionforcontrol.">deleteEntry
Deletes a bullet if the user presses backspace on an empty bullet
and deletes entry from currentEntries.
Helper function for control.</a></li><li><a href="global.html#deleteEntryUpdatesvalueofentryincurrentEntries.">deleteEntry
Updates value of entry in currentEntries.</a></li><li><a href="global.html#enterKeyPressedCreatesanewbulletonthenextlineiftheuserpressesenterandaddscurrententrytocurrentEntries,orifanexistingbulletiseditedthenitupdatestheentryincurrentEntriesHelperfunctionforcontrol.">enterKeyPressed
Creates a new bullet on the next line if the user presses enter and adds
current entry to currentEntries, or if an existing bullet is edited then
it updates the entry in currentEntries
Helper function for control.</a></li><li><a href="global.html#launchBulletModalUpdatesmostrecentbulletwiththebulletthattriggeredthiseventhandlerandlaunchesbulletmodalwithadisplayofthisselectedlistelement">launchBulletModal
Updates most recent bullet with the bullet that triggered this event handler
and launches bullet modal with a display of this selected list element</a></li><li><a href="global.html#notesClickHidesthenotesplaceholderandcreatesanewbullet.">notesClick
Hides the notes placeholder and creates a new bullet.</a></li><li><a href="global.html#populateListElementYesthisisaveryredundantfunction.(TODO:relyonabovefxn).Willrepopulatethelistofbulletpointsfromlocalstoragebycreatingabulletpoint,addingcontent,andsettingbulletstyle.">populateListElement
Yes this is a very redundant function. (TODO: rely on above fxn).
Will repopulate the list of bullet points from local storage
by creating a bullet point, adding content, and setting bullet style.</a></li><li><a href="global.html#setDefaultDateHelperfunctiontofetchcurrentdateandformattobe%2522%257Bdayofweek%257D,%257Bmonth%257D%257Bdate%257D,%257Byear%257D%2522">setDefaultDate
Helper function to fetch current date and format
to be "{day of week}, {month} {date}, {year}"</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Jun 09 2022 22:55:10 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
